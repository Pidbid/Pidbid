import{h as p,ar as y,r as C,aG as k,K as R,a9 as n,j as T,k as b,D as l,x as u,l as B,B as I,C as Q,J as N}from"./vue.2fa98121.js";import{u as O}from"./tagsViewRoutes.9553160b.js";import{_ as A}from"./_plugin-vue_export-helper.c27b6911.js";import"./storage.542a95ff.js";const D={class:"layout-search-dialog"},H=p({name:"layoutBreadcrumbSearch"}),M=p({...H,setup(U,{expose:d}){const f=O(),{tagsViewRoutes:h}=y(f),m=C(),_=k(),o=R({isShowSearch:!1,menuQuery:"",tagsViewList:[]}),w=()=>{o.menuQuery="",o.isShowSearch=!0,x(),N(()=>{setTimeout(()=>{m.value.focus()})})},S=()=>{o.isShowSearch=!1},V=(e,t)=>{let s=e?o.tagsViewList.filter(g(e)):o.tagsViewList;t(s)},g=e=>t=>t.path.toLowerCase().indexOf(e.toLowerCase())>-1||t.meta.title.toLowerCase().indexOf(e.toLowerCase())>-1||t.meta.title.indexOf(e.toLowerCase())>-1,x=()=>{if(o.tagsViewList.length>0)return!1;h.value.map(e=>{var t;(t=e.meta)!=null&&t.isHide||o.tagsViewList.push({...e})})},L=e=>{var c,r,i;let{path:t,redirect:s}=e;((c=e.meta)==null?void 0:c.isLink)&&!((r=e.meta)!=null&&r.isIframe)?window.open((i=e.meta)==null?void 0:i.isLink):s?_.push(s):_.push(t),S()};return d({openSearch:w}),(e,t)=>{const s=n("ele-Search"),c=n("el-icon"),r=n("SvgIcon"),i=n("el-autocomplete"),v=n("el-dialog");return T(),b("div",D,[l(v,{modelValue:o.isShowSearch,"onUpdate:modelValue":t[1]||(t[1]=a=>o.isShowSearch=a),"destroy-on-close":"","show-close":!1},{footer:u(()=>[l(i,{modelValue:o.menuQuery,"onUpdate:modelValue":t[0]||(t[0]=a=>o.menuQuery=a),"fetch-suggestions":V,placeholder:"菜单搜索：支持中文、路由路径",ref_key:"layoutMenuAutocompleteRef",ref:m,onSelect:L,"fit-input-width":!0},{prefix:u(()=>[l(c,{class:"el-input__icon"},{default:u(()=>[l(s)]),_:1})]),default:u(({item:a})=>[B("div",null,[l(r,{name:a.meta.icon,class:"mr5"},null,8,["name"]),I(" "+Q(a.meta.title),1)])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}});const J=A(M,[["__scopeId","data-v-423908bb"]]);export{J as default};
