import{_ as mn}from"./preload-helper.101896b7.js";import{h as tn,ap as wn,r as Ke,ar as qt,aq as vn,aG as bn,K as yn,a as mt,b as _n,a4 as En,aa as Dn,o as Sn,aI as Tn,w as Cn,a9 as Xt,j as he,k as Ne,D as wt,x as In,l as Bt,n as vt,u as ye,F as Yt,Z as On,$ as Re,A as Me,v as bt,C as An,J as yt}from"./vue.2fa98121.js";import{p as Vn}from"./index.a9b756de.js";import{u as Ht}from"./tagsViewRoutes.9553160b.js";import{u as xn}from"./themeConfig.d1e9143e.js";import{u as Pn}from"./keepAliveNames.b0407c3b.js";import{S as _e}from"./storage.542a95ff.js";import{i as Wt}from"./arrayOperation.b573dead.js";import{o as Ut}from"./other.76164931.js";import{e as Ee}from"./mitt.7f99bbc0.js";import{b8 as Ln}from"./index.d83bf2e6.js";import{_ as Nn}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.8901bb4c.js";import"./index.61bdf2ac.js";import"./_commonjsHelpers.48992372.js";import"./routesList.d06143f7.js";import"./userInfo.79f4e961.js";import"./loading.feb74a4a.js";import"./toolsValidate.e1c6b468.js";function jt(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),t.push.apply(t,n)}return t}function re(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jt(Object(t),!0).forEach(function(n){Rn(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):jt(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function tt(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tt=function(e){return typeof e}:tt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(i)}function Rn(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function ce(){return ce=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},ce.apply(this,arguments)}function Mn(i,e){if(i==null)return{};var t={},n=Object.keys(i),a,o;for(o=0;o<n.length;o++)a=n[o],!(e.indexOf(a)>=0)&&(t[a]=i[a]);return t}function kn(i,e){if(i==null)return{};var t=Mn(i,e),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(a=0;a<o.length;a++)n=o[a],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,n)||(t[n]=i[n]))}return t}var Fn="1.15.0";function fe(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var de=fe(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ue=fe(/Edge/i),Gt=fe(/firefox/i),Xe=fe(/safari/i)&&!fe(/chrome/i)&&!fe(/android/i),nn=fe(/iP(ad|od|hone)/i),an=fe(/chrome/i)&&fe(/android/i),rn={capture:!1,passive:!1};function O(i,e,t){i.addEventListener(e,t,!de&&rn)}function T(i,e,t){i.removeEventListener(e,t,!de&&rn)}function ot(i,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),i)try{if(i.matches)return i.matches(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e)}catch{return!1}return!1}}function qn(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function ie(i,e,t,n){if(i){t=t||document;do{if(e!=null&&(e[0]===">"?i.parentNode===t&&ot(i,e):ot(i,e))||n&&i===t)return i;if(i===t)break}while(i=qn(i))}return null}var $t=/\s+/g;function U(i,e,t){if(i&&e)if(i.classList)i.classList[t?"add":"remove"](e);else{var n=(" "+i.className+" ").replace($t," ").replace(" "+e+" "," ");i.className=(n+(t?" "+e:"")).replace($t," ")}}function b(i,e,t){var n=i&&i.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(t=i.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function xe(i,e){var t="";if(typeof i=="string")t=i;else do{var n=b(i,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(i=i.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(t)}function on(i,e,t){if(i){var n=i.getElementsByTagName(e),a=0,o=n.length;if(t)for(;a<o;a++)t(n[a],a);return n}return[]}function ae(){var i=document.scrollingElement;return i||document.documentElement}function M(i,e,t,n,a){if(!(!i.getBoundingClientRect&&i!==window)){var o,s,f,c,d,m,g;if(i!==window&&i.parentNode&&i!==ae()?(o=i.getBoundingClientRect(),s=o.top,f=o.left,c=o.bottom,d=o.right,m=o.height,g=o.width):(s=0,f=0,c=window.innerHeight,d=window.innerWidth,m=window.innerHeight,g=window.innerWidth),(e||t)&&i!==window&&(a=a||i.parentNode,!de))do if(a&&a.getBoundingClientRect&&(b(a,"transform")!=="none"||t&&b(a,"position")!=="static")){var _=a.getBoundingClientRect();s-=_.top+parseInt(b(a,"border-top-width")),f-=_.left+parseInt(b(a,"border-left-width")),c=s+o.height,d=f+o.width;break}while(a=a.parentNode);if(n&&i!==window){var D=xe(a||i),u=D&&D.a,C=D&&D.d;D&&(s/=C,f/=u,g/=u,m/=C,c=s+m,d=f+g)}return{top:s,left:f,bottom:c,right:d,width:g,height:m}}}function zt(i,e,t){for(var n=me(i,!0),a=M(i)[e];n;){var o=M(n)[t],s=void 0;if(t==="top"||t==="left"?s=a>=o:s=a<=o,!s)return n;if(n===ae())break;n=me(n,!1)}return!1}function Pe(i,e,t,n){for(var a=0,o=0,s=i.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==y.ghost&&(n||s[o]!==y.dragged)&&ie(s[o],t.draggable,i,!1)){if(a===e)return s[o];a++}o++}return null}function Nt(i,e){for(var t=i.lastElementChild;t&&(t===y.ghost||b(t,"display")==="none"||e&&!ot(t,e));)t=t.previousElementSibling;return t||null}function $(i,e){var t=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==y.clone&&(!e||ot(i,e))&&t++;return t}function Kt(i){var e=0,t=0,n=ae();if(i)do{var a=xe(i),o=a.a,s=a.d;e+=i.scrollLeft*o,t+=i.scrollTop*s}while(i!==n&&(i=i.parentNode));return[e,t]}function Xn(i,e){for(var t in i)if(!!i.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===i[t][n])return Number(t)}return-1}function me(i,e){if(!i||!i.getBoundingClientRect)return ae();var t=i,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var a=b(t);if(t.clientWidth<t.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return ae();if(n||e)return t;n=!0}}while(t=t.parentNode);return ae()}function Bn(i,e){if(i&&e)for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function _t(i,e){return Math.round(i.top)===Math.round(e.top)&&Math.round(i.left)===Math.round(e.left)&&Math.round(i.height)===Math.round(e.height)&&Math.round(i.width)===Math.round(e.width)}var Be;function sn(i,e){return function(){if(!Be){var t=arguments,n=this;t.length===1?i.call(n,t[0]):i.apply(n,t),Be=setTimeout(function(){Be=void 0},e)}}}function Yn(){clearTimeout(Be),Be=void 0}function ln(i,e,t){i.scrollLeft+=e,i.scrollTop+=t}function un(i){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(i).cloneNode(!0):t?t(i).clone(!0)[0]:i.cloneNode(!0)}var G="Sortable"+new Date().getTime();function Hn(){var i=[],e;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(a){if(!(b(a,"display")==="none"||a===y.ghost)){i.push({target:a,rect:M(a)});var o=re({},i[i.length-1].rect);if(a.thisAnimationDuration){var s=xe(a,!0);s&&(o.top-=s.f,o.left-=s.e)}a.fromRect=o}})}},addAnimationState:function(n){i.push(n)},removeAnimationState:function(n){i.splice(Xn(i,{target:n}),1)},animateAll:function(n){var a=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var o=!1,s=0;i.forEach(function(f){var c=0,d=f.target,m=d.fromRect,g=M(d),_=d.prevFromRect,D=d.prevToRect,u=f.rect,C=xe(d,!0);C&&(g.top-=C.f,g.left-=C.e),d.toRect=g,d.thisAnimationDuration&&_t(_,g)&&!_t(m,g)&&(u.top-g.top)/(u.left-g.left)===(m.top-g.top)/(m.left-g.left)&&(c=Un(u,_,D,a.options)),_t(g,m)||(d.prevFromRect=m,d.prevToRect=g,c||(c=a.options.animation),a.animate(d,u,g,c)),c&&(o=!0,s=Math.max(s,c),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},c),d.thisAnimationDuration=c)}),clearTimeout(e),o?e=setTimeout(function(){typeof n=="function"&&n()},s):typeof n=="function"&&n(),i=[]},animate:function(n,a,o,s){if(s){b(n,"transition",""),b(n,"transform","");var f=xe(this.el),c=f&&f.a,d=f&&f.d,m=(a.left-o.left)/(c||1),g=(a.top-o.top)/(d||1);n.animatingX=!!m,n.animatingY=!!g,b(n,"transform","translate3d("+m+"px,"+g+"px,0)"),this.forRepaintDummy=Wn(n),b(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),b(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){b(n,"transition",""),b(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}function Wn(i){return i.offsetWidth}function Un(i,e,t,n){return Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var Ie=[],Et={initializeByDefault:!0},je={mount:function(e){for(var t in Et)Et.hasOwnProperty(t)&&!(t in e)&&(e[t]=Et[t]);Ie.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ie.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var o=e+"Global";Ie.forEach(function(s){!t[s.pluginName]||(t[s.pluginName][o]&&t[s.pluginName][o](re({sortable:t},n)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](re({sortable:t},n)))})},initializePlugins:function(e,t,n,a){Ie.forEach(function(f){var c=f.pluginName;if(!(!e.options[c]&&!f.initializeByDefault)){var d=new f(e,t,e.options);d.sortable=e,d.options=e.options,e[c]=d,ce(n,d.defaults)}});for(var o in e.options)if(!!e.options.hasOwnProperty(o)){var s=this.modifyOption(e,o,e.options[o]);typeof s<"u"&&(e.options[o]=s)}},getEventProperties:function(e,t){var n={};return Ie.forEach(function(a){typeof a.eventProperties=="function"&&ce(n,a.eventProperties.call(t[a.pluginName],e))}),n},modifyOption:function(e,t,n){var a;return Ie.forEach(function(o){!e[o.pluginName]||o.optionListeners&&typeof o.optionListeners[t]=="function"&&(a=o.optionListeners[t].call(e[o.pluginName],n))}),a}};function jn(i){var e=i.sortable,t=i.rootEl,n=i.name,a=i.targetEl,o=i.cloneEl,s=i.toEl,f=i.fromEl,c=i.oldIndex,d=i.newIndex,m=i.oldDraggableIndex,g=i.newDraggableIndex,_=i.originalEvent,D=i.putSortable,u=i.extraEventProperties;if(e=e||t&&t[G],!!e){var C,I=e.options,z="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!de&&!Ue?C=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(C=document.createEvent("Event"),C.initEvent(n,!0,!0)),C.to=s||t,C.from=f||t,C.item=a||t,C.clone=o,C.oldIndex=c,C.newIndex=d,C.oldDraggableIndex=m,C.newDraggableIndex=g,C.originalEvent=_,C.pullMode=D?D.lastPutMode:void 0;var N=re(re({},u),je.getEventProperties(n,e));for(var L in N)C[L]=N[L];t&&t.dispatchEvent(C),I[z]&&I[z].call(e,C)}}var Gn=["evt"],H=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.evt,o=kn(n,Gn);je.pluginEvent.bind(y)(e,t,re({dragEl:p,parentEl:P,ghostEl:S,rootEl:V,nextEl:Te,lastDownEl:nt,cloneEl:x,cloneHidden:ge,dragStarted:ke,putSortable:F,activeSortable:y.active,originalEvent:a,oldIndex:Ve,oldDraggableIndex:Ye,newIndex:j,newDraggableIndex:pe,hideGhostForTarget:hn,unhideGhostForTarget:pn,cloneNowHidden:function(){ge=!0},cloneNowShown:function(){ge=!1},dispatchSortableEvent:function(f){Y({sortable:t,name:f,originalEvent:a})}},o))};function Y(i){jn(re({putSortable:F,cloneEl:x,targetEl:p,rootEl:V,oldIndex:Ve,oldDraggableIndex:Ye,newIndex:j,newDraggableIndex:pe},i))}var p,P,S,V,Te,nt,x,ge,Ve,j,Ye,pe,Ze,F,Ae=!1,st=!1,lt=[],De,Z,Dt,St,Zt,Jt,ke,Oe,He,We=!1,Je=!1,it,B,Tt=[],Vt=!1,ut=[],ct=typeof document<"u",Qe=nn,Qt=Ue||de?"cssFloat":"float",$n=ct&&!an&&!nn&&"draggable"in document.createElement("div"),fn=function(){if(!!ct){if(de)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),cn=function(e,t){var n=b(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Pe(e,0,t),s=Pe(e,1,t),f=o&&b(o),c=s&&b(s),d=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+M(o).width,m=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+M(s).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&f.float&&f.float!=="none"){var g=f.float==="left"?"left":"right";return s&&(c.clear==="both"||c.clear===g)?"vertical":"horizontal"}return o&&(f.display==="block"||f.display==="flex"||f.display==="table"||f.display==="grid"||d>=a&&n[Qt]==="none"||s&&n[Qt]==="none"&&d+m>a)?"vertical":"horizontal"},zn=function(e,t,n){var a=n?e.left:e.top,o=n?e.right:e.bottom,s=n?e.width:e.height,f=n?t.left:t.top,c=n?t.right:t.bottom,d=n?t.width:t.height;return a===f||o===c||a+s/2===f+d/2},Kn=function(e,t){var n;return lt.some(function(a){var o=a[G].options.emptyInsertThreshold;if(!(!o||Nt(a))){var s=M(a),f=e>=s.left-o&&e<=s.right+o,c=t>=s.top-o&&t<=s.bottom+o;if(f&&c)return n=a}}),n},dn=function(e){function t(o,s){return function(f,c,d,m){var g=f.options.group.name&&c.options.group.name&&f.options.group.name===c.options.group.name;if(o==null&&(s||g))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return t(o(f,c,d,m),s)(f,c,d,m);var _=(s?f:c).options.group.name;return o===!0||typeof o=="string"&&o===_||o.join&&o.indexOf(_)>-1}}var n={},a=e.group;(!a||tt(a)!="object")&&(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},hn=function(){!fn&&S&&b(S,"display","none")},pn=function(){!fn&&S&&b(S,"display","")};ct&&!an&&document.addEventListener("click",function(i){if(st)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),st=!1,!1},!0);var Se=function(e){if(p){e=e.touches?e.touches[0]:e;var t=Kn(e.clientX,e.clientY);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[G]._onDragOver(n)}}},Zn=function(e){p&&p.parentNode[G]._isOutsideThisEl(e.target)};function y(i,e){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=e=ce({},e),i[G]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return cn(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,f){s.setData("Text",f.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:y.supportPointer!==!1&&"PointerEvent"in window&&!Xe,emptyInsertThreshold:5};je.initializePlugins(this,i,t);for(var n in t)!(n in e)&&(e[n]=t[n]);dn(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:$n,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?O(i,"pointerdown",this._onTapStart):(O(i,"mousedown",this._onTapStart),O(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(O(i,"dragover",this),O(i,"dragenter",this)),lt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ce(this,Hn())}y.prototype={constructor:y,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Oe=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,p):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var t=this,n=this.el,a=this.options,o=a.preventOnFilter,s=e.type,f=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(f||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,m=a.filter;if(ri(n),!p&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||a.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Xe&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=ie(c,a.draggable,n,!1),!(c&&c.animated)&&nt!==c)){if(Ve=$(c),Ye=$(c,a.draggable),typeof m=="function"){if(m.call(this,e,c,this)){Y({sortable:t,rootEl:d,name:"filter",targetEl:c,toEl:n,fromEl:n}),H("filter",t,{evt:e}),o&&e.cancelable&&e.preventDefault();return}}else if(m&&(m=m.split(",").some(function(g){if(g=ie(d,g.trim(),n,!1),g)return Y({sortable:t,rootEl:g,name:"filter",targetEl:c,fromEl:n,toEl:n}),H("filter",t,{evt:e}),!0}),m)){o&&e.cancelable&&e.preventDefault();return}a.handle&&!ie(d,a.handle,n,!1)||this._prepareDragStart(e,f,c)}}},_prepareDragStart:function(e,t,n){var a=this,o=a.el,s=a.options,f=o.ownerDocument,c;if(n&&!p&&n.parentNode===o){var d=M(n);if(V=o,p=n,P=p.parentNode,Te=p.nextSibling,nt=n,Ze=s.group,y.dragged=p,De={target:p,clientX:(t||e).clientX,clientY:(t||e).clientY},Zt=De.clientX-d.left,Jt=De.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,p.style["will-change"]="all",c=function(){if(H("delayEnded",a,{evt:e}),y.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Gt&&a.nativeDraggable&&(p.draggable=!0),a._triggerDragStart(e,t),Y({sortable:a,name:"choose",originalEvent:e}),U(p,s.chosenClass,!0)},s.ignore.split(",").forEach(function(m){on(p,m.trim(),Ct)}),O(f,"dragover",Se),O(f,"mousemove",Se),O(f,"touchmove",Se),O(f,"mouseup",a._onDrop),O(f,"touchend",a._onDrop),O(f,"touchcancel",a._onDrop),Gt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,p.draggable=!0),H("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ue||de))){if(y.eventCanceled){this._onDrop();return}O(f,"mouseup",a._disableDelayedDrag),O(f,"touchend",a._disableDelayedDrag),O(f,"touchcancel",a._disableDelayedDrag),O(f,"mousemove",a._delayedDragTouchMoveHandler),O(f,"touchmove",a._delayedDragTouchMoveHandler),s.supportPointer&&O(f,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(c,s.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){p&&Ct(p),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;T(e,"mouseup",this._disableDelayedDrag),T(e,"touchend",this._disableDelayedDrag),T(e,"touchcancel",this._disableDelayedDrag),T(e,"mousemove",this._delayedDragTouchMoveHandler),T(e,"touchmove",this._delayedDragTouchMoveHandler),T(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?O(document,"pointermove",this._onTouchMove):t?O(document,"touchmove",this._onTouchMove):O(document,"mousemove",this._onTouchMove):(O(p,"dragend",this),O(V,"dragstart",this._onDragStart));try{document.selection?at(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ae=!1,V&&p){H("dragStarted",this,{evt:t}),this.nativeDraggable&&O(document,"dragover",Zn);var n=this.options;!e&&U(p,n.dragClass,!1),U(p,n.ghostClass,!0),y.active=this,e&&this._appendGhost(),Y({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Z){this._lastX=Z.clientX,this._lastY=Z.clientY,hn();for(var e=document.elementFromPoint(Z.clientX,Z.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Z.clientX,Z.clientY),e!==t);)t=e;if(p.parentNode[G]._isOutsideThisEl(e),t)do{if(t[G]){var n=void 0;if(n=t[G]._onDragOver({clientX:Z.clientX,clientY:Z.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);pn()}},_onTouchMove:function(e){if(De){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,o=e.touches?e.touches[0]:e,s=S&&xe(S,!0),f=S&&s&&s.a,c=S&&s&&s.d,d=Qe&&B&&Kt(B),m=(o.clientX-De.clientX+a.x)/(f||1)+(d?d[0]-Tt[0]:0)/(f||1),g=(o.clientY-De.clientY+a.y)/(c||1)+(d?d[1]-Tt[1]:0)/(c||1);if(!y.active&&!Ae){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(S){s?(s.e+=m-(Dt||0),s.f+=g-(St||0)):s={a:1,b:0,c:0,d:1,e:m,f:g};var _="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");b(S,"webkitTransform",_),b(S,"mozTransform",_),b(S,"msTransform",_),b(S,"transform",_),Dt=m,St=g,Z=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!S){var e=this.options.fallbackOnBody?document.body:V,t=M(p,!0,Qe,!0,e),n=this.options;if(Qe){for(B=e;b(B,"position")==="static"&&b(B,"transform")==="none"&&B!==document;)B=B.parentNode;B!==document.body&&B!==document.documentElement?(B===document&&(B=ae()),t.top+=B.scrollTop,t.left+=B.scrollLeft):B=ae(),Tt=Kt(B)}S=p.cloneNode(!0),U(S,n.ghostClass,!1),U(S,n.fallbackClass,!0),U(S,n.dragClass,!0),b(S,"transition",""),b(S,"transform",""),b(S,"box-sizing","border-box"),b(S,"margin",0),b(S,"top",t.top),b(S,"left",t.left),b(S,"width",t.width),b(S,"height",t.height),b(S,"opacity","0.8"),b(S,"position",Qe?"absolute":"fixed"),b(S,"zIndex","100000"),b(S,"pointerEvents","none"),y.ghost=S,e.appendChild(S),b(S,"transform-origin",Zt/parseInt(S.style.width)*100+"% "+Jt/parseInt(S.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,o=n.options;if(H("dragStart",this,{evt:e}),y.eventCanceled){this._onDrop();return}H("setupClone",this),y.eventCanceled||(x=un(p),x.removeAttribute("id"),x.draggable=!1,x.style["will-change"]="",this._hideClone(),U(x,this.options.chosenClass,!1),y.clone=x),n.cloneId=at(function(){H("clone",n),!y.eventCanceled&&(n.options.removeCloneOnHide||V.insertBefore(x,p),n._hideClone(),Y({sortable:n,name:"clone"}))}),!t&&U(p,o.dragClass,!0),t?(st=!0,n._loopId=setInterval(n._emulateDragOver,50)):(T(document,"mouseup",n._onDrop),T(document,"touchend",n._onDrop),T(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(n,a,p)),O(document,"drop",n),b(p,"transform","translateZ(0)")),Ae=!0,n._dragStartId=at(n._dragStarted.bind(n,t,e)),O(document,"selectstart",n),ke=!0,Xe&&b(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,a,o,s,f=this.options,c=f.group,d=y.active,m=Ze===c,g=f.sort,_=F||d,D,u=this,C=!1;if(Vt)return;function I(ve,be){H(ve,u,re({evt:e,isOwner:m,axis:D?"vertical":"horizontal",revert:s,dragRect:a,targetRect:o,canSort:g,fromSortable:_,target:n,completed:N,onMove:function(Ge,dt){return et(V,t,p,a,Ge,M(Ge),e,dt)},changed:L},be))}function z(){I("dragOverAnimationCapture"),u.captureAnimationState(),u!==_&&_.captureAnimationState()}function N(ve){return I("dragOverCompleted",{insertion:ve}),ve&&(m?d._hideClone():d._showClone(u),u!==_&&(U(p,F?F.options.ghostClass:d.options.ghostClass,!1),U(p,f.ghostClass,!0)),F!==u&&u!==y.active?F=u:u===y.active&&F&&(F=null),_===u&&(u._ignoreWhileAnimating=n),u.animateAll(function(){I("dragOverAnimationComplete"),u._ignoreWhileAnimating=null}),u!==_&&(_.animateAll(),_._ignoreWhileAnimating=null)),(n===p&&!p.animated||n===t&&!n.animated)&&(Oe=null),!f.dragoverBubble&&!e.rootEl&&n!==document&&(p.parentNode[G]._isOutsideThisEl(e.target),!ve&&Se(e)),!f.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),C=!0}function L(){j=$(p),pe=$(p,f.draggable),Y({sortable:u,name:"change",toEl:t,newIndex:j,newDraggableIndex:pe,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=ie(n,f.draggable,t,!0),I("dragOver"),y.eventCanceled)return C;if(p.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||u._ignoreWhileAnimating===n)return N(!1);if(st=!1,d&&!f.disabled&&(m?g||(s=P!==V):F===this||(this.lastPutMode=Ze.checkPull(this,d,p,e))&&c.checkPut(this,d,p,e))){if(D=this._getDirection(e,n)==="vertical",a=M(p),I("dragOverValid"),y.eventCanceled)return C;if(s)return P=V,z(),this._hideClone(),I("revert"),y.eventCanceled||(Te?V.insertBefore(p,Te):V.appendChild(p)),N(!0);var q=Nt(t,f.draggable);if(!q||ti(e,D,this)&&!q.animated){if(q===p)return N(!1);if(q&&t===e.target&&(n=q),n&&(o=M(n)),et(V,t,p,a,n,o,e,!!n)!==!1)return z(),q&&q.nextSibling?t.insertBefore(p,q.nextSibling):t.appendChild(p),P=t,L(),N(!0)}else if(q&&ei(e,D,this)){var oe=Pe(t,0,f,!0);if(oe===p)return N(!1);if(n=oe,o=M(n),et(V,t,p,a,n,o,e,!1)!==!1)return z(),t.insertBefore(p,oe),P=t,L(),N(!0)}else if(n.parentNode===t){o=M(n);var W=0,J,se=p.parentNode!==t,X=!zn(p.animated&&p.toRect||a,n.animated&&n.toRect||o,D),le=D?"top":"left",Q=zt(n,"top","top")||zt(p,"top","top"),we=Q?Q.scrollTop:void 0;Oe!==n&&(J=o[le],We=!1,Je=!X&&f.invertSwap||se),W=ni(e,n,o,D,X?1:f.swapThreshold,f.invertedSwapThreshold==null?f.swapThreshold:f.invertedSwapThreshold,Je,Oe===n);var K;if(W!==0){var ee=$(p);do ee-=W,K=P.children[ee];while(K&&(b(K,"display")==="none"||K===S))}if(W===0||K===n)return N(!1);Oe=n,He=W;var ue=n.nextElementSibling,te=!1;te=W===1;var Ce=et(V,t,p,a,n,o,e,te);if(Ce!==!1)return(Ce===1||Ce===-1)&&(te=Ce===1),Vt=!0,setTimeout(Qn,30),z(),te&&!ue?t.appendChild(p):n.parentNode.insertBefore(p,te?ue:n),Q&&ln(Q,0,we-Q.scrollTop),P=p.parentNode,J!==void 0&&!Je&&(it=Math.abs(J-M(n)[le])),L(),N(!0)}if(t.contains(p))return N(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){T(document,"mousemove",this._onTouchMove),T(document,"touchmove",this._onTouchMove),T(document,"pointermove",this._onTouchMove),T(document,"dragover",Se),T(document,"mousemove",Se),T(document,"touchmove",Se)},_offUpEvents:function(){var e=this.el.ownerDocument;T(e,"mouseup",this._onDrop),T(e,"touchend",this._onDrop),T(e,"pointerup",this._onDrop),T(e,"touchcancel",this._onDrop),T(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(j=$(p),pe=$(p,n.draggable),H("drop",this,{evt:e}),P=p&&p.parentNode,j=$(p),pe=$(p,n.draggable),y.eventCanceled){this._nulling();return}Ae=!1,Je=!1,We=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),xt(this.cloneId),xt(this._dragStartId),this.nativeDraggable&&(T(document,"drop",this),T(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Xe&&b(document.body,"user-select",""),b(p,"transform",""),e&&(ke&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),S&&S.parentNode&&S.parentNode.removeChild(S),(V===P||F&&F.lastPutMode!=="clone")&&x&&x.parentNode&&x.parentNode.removeChild(x),p&&(this.nativeDraggable&&T(p,"dragend",this),Ct(p),p.style["will-change"]="",ke&&!Ae&&U(p,F?F.options.ghostClass:this.options.ghostClass,!1),U(p,this.options.chosenClass,!1),Y({sortable:this,name:"unchoose",toEl:P,newIndex:null,newDraggableIndex:null,originalEvent:e}),V!==P?(j>=0&&(Y({rootEl:P,name:"add",toEl:P,fromEl:V,originalEvent:e}),Y({sortable:this,name:"remove",toEl:P,originalEvent:e}),Y({rootEl:P,name:"sort",toEl:P,fromEl:V,originalEvent:e}),Y({sortable:this,name:"sort",toEl:P,originalEvent:e})),F&&F.save()):j!==Ve&&j>=0&&(Y({sortable:this,name:"update",toEl:P,originalEvent:e}),Y({sortable:this,name:"sort",toEl:P,originalEvent:e})),y.active&&((j==null||j===-1)&&(j=Ve,pe=Ye),Y({sortable:this,name:"end",toEl:P,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){H("nulling",this),V=p=P=S=Te=x=nt=ge=De=Z=ke=j=pe=Ve=Ye=Oe=He=F=Ze=y.dragged=y.ghost=y.clone=y.active=null,ut.forEach(function(e){e.checked=!0}),ut.length=Dt=St=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":p&&(this._onDragOver(e),Jn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,a=0,o=n.length,s=this.options;a<o;a++)t=n[a],ie(t,s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||ai(t));return e},sort:function(e,t){var n={},a=this.el;this.toArray().forEach(function(o,s){var f=a.children[s];ie(f,this.options.draggable,a,!1)&&(n[o]=f)},this),t&&this.captureAnimationState(),e.forEach(function(o){n[o]&&(a.removeChild(n[o]),a.appendChild(n[o]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ie(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var a=je.modifyOption(this,e,t);typeof a<"u"?n[e]=a:n[e]=t,e==="group"&&dn(n)},destroy:function(){H("destroy",this);var e=this.el;e[G]=null,T(e,"mousedown",this._onTapStart),T(e,"touchstart",this._onTapStart),T(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(T(e,"dragover",this),T(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),lt.splice(lt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ge){if(H("hideClone",this),y.eventCanceled)return;b(x,"display","none"),this.options.removeCloneOnHide&&x.parentNode&&x.parentNode.removeChild(x),ge=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ge){if(H("showClone",this),y.eventCanceled)return;p.parentNode==V&&!this.options.group.revertClone?V.insertBefore(x,p):Te?V.insertBefore(x,Te):V.appendChild(x),this.options.group.revertClone&&this.animate(p,x),b(x,"display",""),ge=!1}}};function Jn(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function et(i,e,t,n,a,o,s,f){var c,d=i[G],m=d.options.onMove,g;return window.CustomEvent&&!de&&!Ue?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=i,c.dragged=t,c.draggedRect=n,c.related=a||e,c.relatedRect=o||M(e),c.willInsertAfter=f,c.originalEvent=s,i.dispatchEvent(c),m&&(g=m.call(d,c,s)),g}function Ct(i){i.draggable=!1}function Qn(){Vt=!1}function ei(i,e,t){var n=M(Pe(t.el,0,t.options,!0)),a=10;return e?i.clientX<n.left-a||i.clientY<n.top&&i.clientX<n.right:i.clientY<n.top-a||i.clientY<n.bottom&&i.clientX<n.left}function ti(i,e,t){var n=M(Nt(t.el,t.options.draggable)),a=10;return e?i.clientX>n.right+a||i.clientX<=n.right&&i.clientY>n.bottom&&i.clientX>=n.left:i.clientX>n.right&&i.clientY>n.top||i.clientX<=n.right&&i.clientY>n.bottom+a}function ni(i,e,t,n,a,o,s,f){var c=n?i.clientY:i.clientX,d=n?t.height:t.width,m=n?t.top:t.left,g=n?t.bottom:t.right,_=!1;if(!s){if(f&&it<d*a){if(!We&&(He===1?c>m+d*o/2:c<g-d*o/2)&&(We=!0),We)_=!0;else if(He===1?c<m+it:c>g-it)return-He}else if(c>m+d*(1-a)/2&&c<g-d*(1-a)/2)return ii(e)}return _=_||s,_&&(c<m+d*o/2||c>g-d*o/2)?c>m+d/2?1:-1:0}function ii(i){return $(p)<$(i)?1:-1}function ai(i){for(var e=i.tagName+i.className+i.src+i.href+i.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function ri(i){ut.length=0;for(var e=i.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&ut.push(n)}}function at(i){return setTimeout(i,0)}function xt(i){return clearTimeout(i)}ct&&O(document,"touchmove",function(i){(y.active||Ae)&&i.cancelable&&i.preventDefault()});y.utils={on:O,off:T,css:b,find:on,is:function(e,t){return!!ie(e,t,e,!1)},extend:Bn,throttle:sn,closest:ie,toggleClass:U,clone:un,index:$,nextTick:at,cancelNextTick:xt,detectDirection:cn,getChild:Pe};y.get=function(i){return i[G]};y.mount=function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(y.utils=re(re({},y.utils),n.utils)),je.mount(n)})};y.create=function(i,e){return new y(i,e)};y.version=Fn;var R=[],Fe,Pt,Lt=!1,It,Ot,ft,qe;function oi(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return i.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?O(document,"dragover",this._handleAutoScroll):this.options.supportPointer?O(document,"pointermove",this._handleFallbackAutoScroll):n.touches?O(document,"touchmove",this._handleFallbackAutoScroll):O(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):(T(document,"pointermove",this._handleFallbackAutoScroll),T(document,"touchmove",this._handleFallbackAutoScroll),T(document,"mousemove",this._handleFallbackAutoScroll)),en(),rt(),Yn()},nulling:function(){ft=Pt=Fe=Lt=qe=It=Ot=null,R.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var a=this,o=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,f=document.elementFromPoint(o,s);if(ft=t,n||this.options.forceAutoScrollFallback||Ue||de||Xe){At(t,this.options,f,n);var c=me(f,!0);Lt&&(!qe||o!==It||s!==Ot)&&(qe&&en(),qe=setInterval(function(){var d=me(document.elementFromPoint(o,s),!0);d!==c&&(c=d,rt()),At(t,a.options,d,n)},10),It=o,Ot=s)}else{if(!this.options.bubbleScroll||me(f,!0)===ae()){rt();return}At(t,this.options,me(f,!1),!1)}}},ce(i,{pluginName:"scroll",initializeByDefault:!0})}function rt(){R.forEach(function(i){clearInterval(i.pid)}),R=[]}function en(){clearInterval(qe)}var At=sn(function(i,e,t,n){if(!!e.scroll){var a=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,s=e.scrollSensitivity,f=e.scrollSpeed,c=ae(),d=!1,m;Pt!==t&&(Pt=t,rt(),Fe=e.scroll,m=e.scrollFn,Fe===!0&&(Fe=me(t,!0)));var g=0,_=Fe;do{var D=_,u=M(D),C=u.top,I=u.bottom,z=u.left,N=u.right,L=u.width,q=u.height,oe=void 0,W=void 0,J=D.scrollWidth,se=D.scrollHeight,X=b(D),le=D.scrollLeft,Q=D.scrollTop;D===c?(oe=L<J&&(X.overflowX==="auto"||X.overflowX==="scroll"||X.overflowX==="visible"),W=q<se&&(X.overflowY==="auto"||X.overflowY==="scroll"||X.overflowY==="visible")):(oe=L<J&&(X.overflowX==="auto"||X.overflowX==="scroll"),W=q<se&&(X.overflowY==="auto"||X.overflowY==="scroll"));var we=oe&&(Math.abs(N-a)<=s&&le+L<J)-(Math.abs(z-a)<=s&&!!le),K=W&&(Math.abs(I-o)<=s&&Q+q<se)-(Math.abs(C-o)<=s&&!!Q);if(!R[g])for(var ee=0;ee<=g;ee++)R[ee]||(R[ee]={});(R[g].vx!=we||R[g].vy!=K||R[g].el!==D)&&(R[g].el=D,R[g].vx=we,R[g].vy=K,clearInterval(R[g].pid),(we!=0||K!=0)&&(d=!0,R[g].pid=setInterval(function(){n&&this.layer===0&&y.active._onTouchMove(ft);var ue=R[this.layer].vy?R[this.layer].vy*f:0,te=R[this.layer].vx?R[this.layer].vx*f:0;typeof m=="function"&&m.call(y.dragged.parentNode[G],te,ue,i,ft,R[this.layer].el)!=="continue"||ln(R[this.layer].el,te,ue)}.bind({layer:g}),24))),g++}while(e.bubbleScroll&&_!==c&&(_=me(_,!1)));Lt=d}},30),gn=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,o=e.activeSortable,s=e.dispatchSortableEvent,f=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(!!t){var d=n||o;f();var m=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,g=document.elementFromPoint(m.clientX,m.clientY);c(),d&&!d.el.contains(g)&&(s("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function Rt(){}Rt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=Pe(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:gn};ce(Rt,{pluginName:"revertOnSpill"});function Mt(){}Mt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,a=n||this.sortable;a.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),a.animateAll()},drop:gn};ce(Mt,{pluginName:"removeOnSpill"});y.mount(new oi);y.mount(Mt,Rt);const si=["data-url","onContextmenu","onMousedown","onClick"],li={key:0,class:"iconfont icon-webicon318 layout-navbars-tagsview-ul-li-iconfont"},ui=tn({name:"layoutTagsView"}),fi=tn({...ui,setup(i){const e=wn(()=>mn(()=>import("./contextmenu.cd0351a9.js"),["static/contextmenu.cd0351a9.js","static/vue.2fa98121.js","static/_plugin-vue_export-helper.c27b6911.js","static/contextmenu.080b83cc.css"])),t=Ke([]),n=Ke(),a=Ke(),o=Ke(),s=Ht(),f=xn(),c=Ht(),{themeConfig:d}=qt(f),{tagsViewRoutes:m}=qt(c),g=Pn(),_=vn(),D=bn(),u=yn({routeActive:"",routePath:_.path,dropdown:{x:"",y:""},sortable:"",tagsRefsIndex:0,tagsViewList:[],tagsViewRoutesList:[]}),C=mt(()=>d.value.tagsStyle),I=mt(()=>d.value),z=mt(()=>l=>Ut.setTagsViewNameI18n(l)),N=l=>I.value.isShareTagsView?l.path===u.routePath:l.query&&Object.keys(l.query).length||l.params&&Object.keys(l.params).length?l.url?l.url===u.routeActive:l.path===u.routeActive:l.path===u.routePath,L=l=>{_e.set("tagsViewList",l)},q=async()=>{u.routeActive=await ne(_),u.routePath=await _.meta.isDynamic?_.meta.isDynamicPath:_.path,u.tagsViewList=[],u.tagsViewRoutesList=m.value,oe()},oe=async()=>{_e.get("tagsViewList")&&I.value.isCacheTagsView?u.tagsViewList=await _e.get("tagsViewList"):(await u.tagsViewRoutesList.map(l=>{var r;((r=l.meta)==null?void 0:r.isAffix)&&!l.meta.isHide&&(l.url=ne(l),u.tagsViewList.push({...l}),g.addCachedView(l))}),await se(_.path,_)),kt(I.value.isShareTagsView?u.routePath:u.routeActive)},W=async(l,r)=>{var w,A;let h=(w=r==null?void 0:r.meta)!=null&&w.isDynamic?r.meta.isDynamicPath:l;if(u.tagsViewList.filter(E=>{var k,Le;return E.path===h&&Wt((k=r==null?void 0:r.meta)!=null&&k.isDynamic?E.params?E.params:null:E.query?E.query:null,(Le=r==null?void 0:r.meta)!=null&&Le.isDynamic?r!=null&&r.params?r==null?void 0:r.params:null:r!=null&&r.query?r==null?void 0:r.query:null)}).length<=0){let E=u.tagsViewRoutesList.find(k=>k.path===h);if(!E||E.meta.isAffix||E.meta.isLink&&!E.meta.isIframe)return!1;(A=r==null?void 0:r.meta)!=null&&A.isDynamic?E.params=r.params:E.query=r==null?void 0:r.query,E.url=ne(E),u.tagsViewList.push({...E}),await g.addCachedView(E),L(u.tagsViewList)}},J=(l,r)=>{var v;let h=(v=r==null?void 0:r.meta)!=null&&v.isDynamic?r.meta.isDynamicPath:l;u.tagsViewList.forEach(w=>{var A,E,k;w.path===h&&!Wt((A=r==null?void 0:r.meta)!=null&&A.isDynamic?w.params?w.params:null:w.query?w.query:null,(E=r==null?void 0:r.meta)!=null&&E.isDynamic?r!=null&&r.params?r==null?void 0:r.params:null:r!=null&&r.query?r==null?void 0:r.query:null)&&((k=r==null?void 0:r.meta)!=null&&k.isDynamic?w.params=r.params:w.query=r==null?void 0:r.query,w.url=ne(w),L(u.tagsViewList))})},se=(l,r)=>{yt(async()=>{var v,w,A;let h;if((v=r==null?void 0:r.meta)!=null&&v.isDynamic){if(I.value.isShareTagsView?await J(l,r):await W(l,r),u.tagsViewList.some(E=>{var k;return E.path===((k=r==null?void 0:r.meta)==null?void 0:k.isDynamicPath)}))return L(u.tagsViewList),!1;h=u.tagsViewRoutesList.find(E=>{var k;return E.path===((k=r==null?void 0:r.meta)==null?void 0:k.isDynamicPath)})}else{if(I.value.isShareTagsView?await J(l,r):await W(l,r),u.tagsViewList.some(E=>E.path===l))return L(u.tagsViewList),!1;h=u.tagsViewRoutesList.find(E=>E.path===l)}if(!h||((w=h==null?void 0:h.meta)==null?void 0:w.isLink)&&!h.meta.isIframe)return!1;(A=r==null?void 0:r.meta)!=null&&A.isDynamic?h.params=r!=null&&r.params?r==null?void 0:r.params:_.params:h.query=r!=null&&r.query?r==null?void 0:r.query:_.query,h.url=ne(h),await g.addCachedView(h),await u.tagsViewList.push({...h}),await L(u.tagsViewList)})},X=async l=>{var v;const r=decodeURI(l);let h={};if(u.tagsViewList.forEach(w=>{w.transUrl=be(w),w.transUrl?w.transUrl===be(w)&&(h=w):w.path===r&&(h=w)}),!h)return!1;await g.delCachedView(h),Ee.emit("onTagsViewRefreshRouterView",l),(v=h.meta)!=null&&v.isKeepAlive&&g.addCachedView(h)},le=l=>{u.tagsViewList.map((r,h,v)=>{var w;(w=r.meta)!=null&&w.isAffix||(I.value.isShareTagsView?r.path===l:r.url===l)&&(g.delCachedView(r),u.tagsViewList.splice(h,1),setTimeout(()=>{(u.tagsViewList.length===h&&I.value.isShareTagsView?u.routePath===l:u.routeActive===l)?v[v.length-1].meta.isDynamic?h!==v.length?D.push({name:v[h].name,params:v[h].params}):D.push({name:v[v.length-1].name,params:v[v.length-1].params}):h!==v.length?D.push({path:v[h].path,query:v[h].query}):D.push({path:v[v.length-1].path,query:v[v.length-1].query}):(u.tagsViewList.length!==h&&I.value.isShareTagsView?u.routePath===l:u.routeActive===l)&&(v[h].meta.isDynamic?D.push({name:v[h].name,params:v[h].params}):D.push({path:v[h].path,query:v[h].query}))},0))}),L(u.tagsViewList)},Q=l=>{_e.get("tagsViewList")&&(u.tagsViewList=[],_e.get("tagsViewList").map(r=>{var h;((h=r.meta)==null?void 0:h.isAffix)&&!r.meta.isHide&&(r.url=ne(r),g.delOthersCachedViews(r),u.tagsViewList.push({...r}))}),se(l,_),L(u.tagsViewList))},we=()=>{_e.get("tagsViewList")&&(g.delAllCachedViews(),u.tagsViewList=[],_e.get("tagsViewList").map(l=>{var r;((r=l.meta)==null?void 0:r.isAffix)&&!l.meta.isHide&&(l.url=ne(l),u.tagsViewList.push({...l}),D.push({path:u.tagsViewList[u.tagsViewList.length-1].path}))}),L(u.tagsViewList))},K=async l=>{const r=u.tagsViewList.find(h=>I.value.isShareTagsView?h.path===l:h.url===l);r.meta.isDynamic?await D.push({name:r.name,params:r.params}):await D.push({name:r.name,query:r.query}),s.setCurrenFullscreen(!0)},ee=l=>{let r={};return u.tagsViewList.forEach(h=>{h.transUrl=be(h),h.transUrl?h.transUrl===be(h)&&h.transUrl===l.commonUrl&&(r=h):h.path===decodeURI(l.path)&&(r=h)}),r||null},ue=async l=>{if(l.commonUrl=be(l),!ee(l))return Ln({type:"warning",message:"请正确输入路径及完整参数（query、params）"});const{path:r,name:h,params:v,query:w,meta:A,url:E}=ee(l);switch(l.contextMenuClickId){case 0:A.isDynamic?await D.push({name:h,params:v}):await D.push({path:r,query:w}),X(_.fullPath);break;case 1:le(I.value.isShareTagsView?r:E);break;case 2:A.isDynamic?await D.push({name:h,params:v}):await D.push({path:r,query:w}),Q(r);break;case 3:we();break;case 4:K(I.value.isShareTagsView?r:E);break}},te=(l,r)=>{const{clientX:h,clientY:v}=r;u.dropdown.x=h,u.dropdown.y=v,a.value.openContextmenu(l)},Ce=(l,r)=>{var h;if(!((h=l.meta)!=null&&h.isAffix)&&r.button===1){const v=Object.assign({},{contextMenuClickId:1,...l});ue(v)}},ve=(l,r)=>{u.tagsRefsIndex=r,D.push(l)},be=l=>{var v,w;let r=l.query&&Object.keys(l.query).length>0?l.query:l.params;if(!r)return"";let h="";for(let[A,E]of Object.entries(r))(v=l.meta)!=null&&v.isDynamic?h+=`/${E}`:h+=`&${A}=${E}`;return(w=l.meta)!=null&&w.isDynamic?l.isFnClick?decodeURI(l.path):`${l.path.split(":")[0]}${h.replace(/^\//,"")}`:`${l.path}${h.replace(/^&/,"?")}`},ne=l=>{var v;let r=l.query&&Object.keys(l.query).length>0?l.query:l.params;if(!r||Object.keys(r).length<=0)return l.path;let h="";for(let w in r)h+=r[w];return`${(v=l.meta)!=null&&v.isDynamic?l.meta.isDynamicPath:l.path}-${h}`},Ge=l=>{n.value.$refs.wrapRef.scrollLeft+=l.wheelDelta/4},dt=()=>{yt(()=>{if(t.value.length<=0)return!1;let l=t.value[u.tagsRefsIndex],r=u.tagsRefsIndex,h=t.value.length,v=t.value[0],w=t.value[t.value.length-1],A=n.value.$refs.wrapRef,E=A.scrollWidth,k=A.offsetWidth,Le=A.scrollLeft,gt=t.value[u.tagsRefsIndex-1],Ft=t.value[u.tagsRefsIndex+1],$e=0,ze=0;l===v?A.scrollLeft=0:l===w?A.scrollLeft=E-k:(r===0?$e=v.offsetLeft-5:$e=(gt==null?void 0:gt.offsetLeft)-5,r===h?ze=w.offsetLeft+w.offsetWidth+5:ze=Ft.offsetLeft+Ft.offsetWidth+5,ze>Le+k?A.scrollLeft=ze-k:$e<Le&&(A.scrollLeft=$e)),n.value.update()})},kt=l=>{yt(async()=>{let r=await u.tagsViewList;u.tagsRefsIndex=r.findIndex(h=>I.value.isShareTagsView?h.path===l:h.url===l),dt()})},ht=async()=>{const l=document.querySelector(".layout-navbars-tagsview-ul");if(!l)return!1;u.sortable.el&&u.sortable.destroy(),u.sortable=y.create(l,{animation:300,dataIdAttr:"data-url",disabled:!I.value.isSortableTagsView,onEnd:()=>{const r=[];u.sortable.toArray().map(h=>{u.tagsViewList.map(v=>{v.url===h&&r.push({...v})})}),L(r)}})},pt=async()=>{await ht(),Ut.isMobile()&&u.sortable.el&&u.sortable.destroy()};return _n(()=>{pt(),window.addEventListener("resize",pt),Ee.on("onCurrentContextmenuClick",l=>{l.isFnClick=!0,ue(l)}),Ee.on("openOrCloseSortable",()=>{ht()}),Ee.on("openShareTagsView",()=>{I.value.isShareTagsView&&(D.push("/home"),u.tagsViewList=[],u.tagsViewRoutesList.map(l=>{var r;((r=l.meta)==null?void 0:r.isAffix)&&!l.meta.isHide&&(l.url=ne(l),u.tagsViewList.push({...l}))}))})}),En(()=>{Ee.off("onCurrentContextmenuClick",()=>{}),Ee.off("openOrCloseSortable",()=>{}),Ee.off("openShareTagsView",()=>{}),window.removeEventListener("resize",pt)}),Dn(()=>{t.value=[]}),Sn(()=>{q(),ht()}),Tn(async l=>{u.routeActive=ne(l),u.routePath=l.meta.isDynamic?l.meta.isDynamicPath:l.path,await se(l.path,l),kt(I.value.isShareTagsView?u.routePath:u.routeActive)}),Cn(Vn.state,l=>{if(l.tagsViewRoutes.tagsViewRoutes.length===u.tagsViewRoutesList.length)return!1;q()},{deep:!0}),(l,r)=>{const h=Xt("SvgIcon"),v=Xt("el-scrollbar");return he(),Ne("div",{class:vt(["layout-navbars-tagsview",{"layout-navbars-tagsview-shadow":ye(I).layout==="classic"}])},[wt(v,{ref_key:"scrollbarRef",ref:n,onWheel:Re(Ge,["prevent"])},{default:In(()=>[Bt("ul",{class:vt(["layout-navbars-tagsview-ul",ye(C)]),ref_key:"tagsUlRef",ref:o},[(he(!0),Ne(Yt,null,On(u.tagsViewList,(w,A)=>(he(),Ne("li",{key:A,class:vt(["layout-navbars-tagsview-ul-li",{"is-active":N(w)}]),"data-url":w.url,onContextmenu:Re(E=>te(w,E),["prevent"]),onMousedown:E=>Ce(w,E),onClick:E=>ve(w,A),ref_for:!0,ref:E=>{E&&(t.value[A]=E)}},[N(w)?(he(),Ne("i",li)):Me("",!0),!N(w)&&ye(I).isTagsviewIcon?(he(),bt(h,{key:1,name:w.meta.icon,class:"pr5"},null,8,["name"])):Me("",!0),Bt("span",null,An(ye(z)(w)),1),N(w)?(he(),Ne(Yt,{key:2},[wt(h,{name:"ele-RefreshRight",class:"ml5 layout-navbars-tagsview-ul-li-refresh",onClick:r[0]||(r[0]=Re(E=>X(l.$route.fullPath),["stop"]))}),w.meta.isAffix?Me("",!0):(he(),bt(h,{key:0,name:"ele-Close",class:"layout-navbars-tagsview-ul-li-icon layout-icon-active",onClick:Re(E=>le(ye(I).isShareTagsView?w.path:w.url),["stop"])},null,8,["onClick"]))],64)):Me("",!0),w.meta.isAffix?Me("",!0):(he(),bt(h,{key:3,name:"ele-Close",class:"layout-navbars-tagsview-ul-li-icon layout-icon-three",onClick:Re(E=>le(ye(I).isShareTagsView?w.path:w.url),["stop"])},null,8,["onClick"]))],42,si))),128))],2)]),_:1},8,["onWheel"]),wt(ye(e),{dropdown:u.dropdown,ref_key:"contextmenuRef",ref:a,onCurrentContextmenuClick:ue},null,8,["dropdown"])],2)}}});const Vi=Nn(fi,[["__scopeId","data-v-ce4262a4"]]);export{Vi as default};
